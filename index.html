<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gift Center Pi - Live Updates</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f5f5f5;
    }
    header {
      background: #6b46c1;
      color: white;
      text-align: center;
      padding: 20px;
    }
    section {
      background: white;
      margin: 10px;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 { color: #6b46c1; margin-top: 0; }
    ul { padding-left: 20px; }
    a { color: #333; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>📱 Gift Center Pi</h1>
    <p>Live Islamic, Crypto, Stock & News Updates</p>
  </header>

  <section>
    <h2>🕋 Dua of the Day</h2>
    <p>رَّبِّ زِدْنِي عِلْمًا</p>
    <p><em>“My Lord, increase me in knowledge.”</em> (Quran 20:114)</p>
  </section>

  <section>
    <h2>🪙 Crypto Market (Live)</h2>
    <div id="crypto">Loading...</div>
  </section>

  <section>
    <h2>📈 Stock Market Indices (Live)</h2>
    <div id="stocks">Loading...</div>
  </section>

  <section>
    <h2>🗓 Hijri & Gregorian Date</h2>
    <div id="dates">Loading...</div>
  </section>

  <section>
    <h2>🔮 Horoscope (Capricorn)</h2>
    <div id="horoscope">Loading...</div>
  </section>

  <section>
    <h2>📰 News Headlines</h2>
    <ul id="news">Loading...</ul>
  </section>

  <section>
    <h2>🏏 Cricket Score</h2>
    <p>Coming Soon – API under integration</p>
  </section>

  <script>
    // ✅ 1. Crypto Prices via CoinGecko
    fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd")
      .then(res => res.json())
      .then(data => {
        document.getElementById("crypto").innerHTML = `
          🟠 Bitcoin (BTC): $${data.bitcoin.usd}<br>
          🔵 Ethereum (ETH): $${data.ethereum.usd}
        `;
      });

    // ✅ 2. Stock Indices via FinancialModelingPrep
    fetch("https://financialmodelingprep.com/api/v3/quote/%5EDJI,%5EGSPC,%5EIXIC?apikey=demo")
      .then(res => res.json())
      .then(data => {
        let output = "";
        data.forEach(item => {
          output += `📊 ${item.name}: $${item.price}<br>`;
        });
        document.getElementById("stocks").innerHTML = output;
      });

    // ✅ 3. Date & Hijri Date
    const today = new Date();
    const hijri = new Intl.DateTimeFormat('en-TN-u-ca-islamic', {
      day: 'numeric', month: 'long', year: 'numeric'
    }).format(today);

    document.getElementById("dates").innerHTML = `
      Gregorian: ${today.toDateString()}<br>
      Hijri: ${hijri}
    `;

    // ✅ 4. Horoscope from Aztro API (uses CORS proxy)
    fetch("https://api.allorigins.win/raw?url=https://aztro.sameerkumar.website/?sign=capricorn&day=today", {
      method: "POST"
    })
      .then(res => res.json())
      .then(data => {
        document.getElementById("horoscope").innerText = data.description;
      });

    // ✅ 5. NewsAPI – using demo key
    fetch("https://newsapi.org/v2/top-headlines?country=us&apiKey=5f2b4f4a7e7747a4a7b4f4a7e7747a4a")
      .then(res => res.json())
      .then(data => {
        const newsList = data.articles.slice(0, 5).map(article =>
          `<li><a href="${article.url}" target="_blank">${article.title}</a></li>`
        ).join('');
        document.getElementById("news").innerHTML = newsList;
      }).catch(() => {
        document.getElementById("news").innerHTML = "<li>Error loading news.</li>";
      });
  </script>
</body>
</html>
